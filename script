-- Made by FurryBoy
-- https://raw.githubusercontent.com/furryboy1/dh-code-redeemer/refs/heads/main/Script
if _G.__DH_REDEEMER_LOADED then return end
_G.__DH_REDEEMER_LOADED = true

local function dprint(...) print("[DHR]", ...) end

dprint("Initializing...")
if not game:IsLoaded() then
    game.Loaded:Wait()
end

if game.PlaceId ~= 2788229376 then
    _G.__DH_REDEEMER_LOADED = false
    dprint("This script only works for Da Hood.")
    dprint("If you are trying to run this script, please ensure you are in the correct game.")

    if setclipboard then
        pcall(function()
            setclipboard("https://roblox.com/games/2788229376")
            dprint("Copied Da Hood game link to your clipboard.")
        end)
    end
    return
end

local codes = loadstring(game:HttpGet("https://raw.githubusercontent.com/furryboy1/dh-code-redeemer/refs/heads/main/codes.lua"))()
local plrs = game:GetService("Players")
local starterGui = game:GetService("StarterGui")
local mainevent = game:GetService("ReplicatedStorage").MainEvent
local formatted = tostring(codes.totalcash):reverse():gsub("%d%d%d", "%1,")
formatted = formatted:reverse():gsub("^,", "")

dprint("Credits: " .. codes.credit)
dprint("Total active codes: " .. #codes.codes)
dprint("Total DHC in codes: " .. formatted)

-- announcements
if codes.announcement and #codes.announcement > 0 then
    dprint("Announcement(s):")
    for _, announcement in pairs(codes.announcement) do
        dprint(" - " .. announcement)
    end
end

-- changelogs
if codes.changelogs and #codes.changelogs > 0 then
    dprint("Changelog(s):")
    for _, changelog in pairs(codes.changelogs) do
        dprint(" - " .. changelog)
    end
end

dprint("Waiting for player to fully load...")
local localPlayer = plrs.LocalPlayer
if not localPlayer then localPlayer = plrs.PlayerAdded:Wait() end
local character = localPlayer.Character or localPlayer.CharacterAdded:Wait()
character:WaitForChild("Humanoid")
character:WaitForChild("FULLY_LOADED_CHAR")
dprint("Player and character fully loaded!")
task.wait(2)

dprint("Starting to redeem codes...")
for index, code in pairs(codes.codes) do
    mainevent:FireServer("EnterPromoCode", code)
    dprint(`Redeemed Code [{index}/{#codes.codes}]: {code}`)
    if index == #codes.codes then
        dprint("Finished redeeming all active codes!")
        break
    end
    task.wait(codes.rate)
end
_G.__DH_REDEEMER_LOADED = false